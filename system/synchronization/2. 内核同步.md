### 临界区
临界区就是一段代码，其他进程进入临界区前，必须等待已进入临界区的进程执行完临界区中的所有代码。

至于为什么要有临界区，这是因为多个进程有可能交叉访问一些公共资源，最终结果就是会导致数据的不一致现象。因此，内核必须准确的识别出相关的临界区，并实施必要的手段，保证临界区内的资源只能被互斥的访问。

针对单CPU系统，只需简单的禁用内核抢占功能来实现临界区。而针对多CPU系统，我们则需要一些特定的同步技术来实现临界区。

### 同步原语
linux系统下常见的同步原语有如下几种：
技术 | 说明 | 使用范围
---- | --- | ----
每CPU变量 | 在CPU之间共享 | 所有CPU
原子操作 |  对一个数据原子操作（读-修改-写） | 所有CPU
内存屏障 | 避免指令重排 | 所有CPU
自旋锁 | 加锁时忙等 | 本地CPU或所有CPU
信号量 | 加锁时阻塞等待（睡眠） | 所有CPU
顺序锁 | 基于访问计数器的锁 | 所有CPU
禁止本地中断 | 禁止单个CPU的本地中断 | 本地CPU
禁止本地软中断 | 禁止单个CPU的本地可延迟函数处理 | 本地CPU
读-拷贝-更新（RCU） | 通过指针来共享数据，而非加锁 | 所有CPU

#### 每CPU数据